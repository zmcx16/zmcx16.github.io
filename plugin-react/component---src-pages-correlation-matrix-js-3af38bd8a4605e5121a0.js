(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"4cdY":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("hszt"),n=a("wcMh"),o=a("J+eN"),l=a("b+jq"),c=a("Ao2N"),i=Object(r.a)({chartName:"LineChart",GraphicalChild:n.a,axisComponents:[{axisType:"xAxis",AxisComp:o.a},{axisType:"yAxis",AxisComp:l.a}],formatAxisMap:c.b})},KR5i:function(e,t,a){e.exports={container:"marketCorrelationMatrix-module--container--1PUvo",matrixColTitle:"marketCorrelationMatrix-module--matrixColTitle--3EqUq",matrixRowTitle:"marketCorrelationMatrix-module--matrixRowTitle--1b_7B",matrixNodeFirstRow:"marketCorrelationMatrix-module--matrixNodeFirstRow--1j9rp",matrixNodeFirstColumn:"marketCorrelationMatrix-module--matrixNodeFirstColumn--afYwl",matrixNode:"marketCorrelationMatrix-module--matrixNode--2FWdd"}},N5Ut:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r),o=a("w8ma"),l=a("HaE+"),c=a("KQm4"),i=a("o0o1"),u=a.n(i),s=(a("E9XD"),a("V3n9")),m=a("tAME"),p=a("hGmu"),d=a("G43+"),f=a("je4i"),b=a.n(f),h=a("tFdz"),y=a("jJ2d"),x=a("oqdv"),v=a("ps87"),g=a("4cdY"),w=a("y9N3"),E=a("J+eN"),S=a("b+jq"),j=a("nJDY"),k=a("Yjvw"),N=a("wcMh"),O=a("wd/R"),M=a.n(O),C=function(e){var t=e.data,a=e.description;return n.a.createElement("div",{style:{width:window.innerWidth-100+"px",height:window.innerHeight-100+"px",maxWidth:"1200px",maxHeight:"600px"}},n.a.createElement(v.a,{width:"100%",height:"100%"},n.a.createElement(g.a,{data:t,margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(w.a,{strokeDasharray:"3 3"}),n.a.createElement(E.a,{dataKey:"Date",tickFormatter:function(e){return M()(e).format("MM/DD/YYYY")}}),n.a.createElement(S.a,{domain:[-1,1]}),n.a.createElement(j.a,null),n.a.createElement(k.a,null),n.a.createElement(N.a,{type:"monotone",name:a,dataKey:"Score",stroke:"#8884d8",dot:!1}))))},R=a("KR5i"),D=a.n(R),T=function(e){return e.map((function(e){return{symbol:e.symbol,src:e.src}}))},F=function(e){var t=T(e);return t.reduce((function(a,r){var n=e.find((function(e){return e.symbol===r.symbol})),o=t.reduce((function(e,a){var o,l,i=n.correlations[a.symbol].value,u=n.correlations[a.symbol].p_value,s=n.dataUrl,m=t.findIndex((function(e){return e.symbol==r.symbol})),p=t.findIndex((function(e){return e.symbol==a.symbol})),d=i<0?(o=i,l=Math.abs(o),"rgba(243, 87, 86, "+(isNaN(l)?0:l)+")"):function(e){var t=Math.abs(e);return"rgba(46, 233, 255, "+(isNaN(t)?0:t)+")"}(i);return[].concat(Object(c.a)(e),[{colSymbolSrc:a,rowSymbolSrc:r,row:m,column:p,value:i,pValue:u,dataUrl:s,color:d}])}),[]);return[].concat(Object(c.a)(a),Object(c.a)(o))}),[])},W=function(e){var t=e.data,a=e.popperTipRef,r=e.modalWindowRef,o=D.a.matrixNode;0===t.row&&(o+=" "+D.a.matrixNodeFirstRow),0===t.column&&(o+=" "+D.a.matrixNodeFirstColumn);var c=t.colSymbolSrc.symbol+" has a "+t.value+" correlation to "+t.rowSymbolSrc.symbol+"\np-value: "+t.pValue+"\n",i=Object(h.a)({cachePolicy:"no-cache"}),s=Object(h.a)({cachePolicy:"no-cache"});return n.a.createElement("div",{className:o},n.a.createElement("div",{style:{background:t.color},onMouseOver:function(e){a.current.setOpen(!0,e.currentTarget,c)},onMouseOut:function(){a.current.setOpen(!1)},onClick:function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(t,a,r){var n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=btoa(t+"_"+a)+".json",e.next=3,r.get("/plugin-react/markets/"+n);case 3:if(o=e.sent,!(r.response.ok&&o.data&&o.data.length>0)){e.next=8;break}return e.abrupt("return",o.data);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();Promise.all([e(t.colSymbolSrc.src,t.colSymbolSrc.symbol,i),e(t.rowSymbolSrc.src,t.rowSymbolSrc.symbol,s)]).then((function(e){2==e.length&&null!==e[0]&&null!==e[1]?function(){for(var a,o,l=function(e){var t,a,r,n={},o=(t=e[0].Date,a=e[1].Date,r=15,Date.parse(t)-Date.parse(a)>24*r*60*60*1e3);return e.forEach((function(e,t){var a=e.Close;if("string"==typeof a&&(a=parseFloat(a.replace("%",""))),o){var r=Date.parse(e.Date),l=(r.getMonth()+1).toString().padStart(2,"0")+"/01/"+r.getFullYear().toString();n[l]=a}else n[e.Date]=a})),n},c=l(e[0]),i=l(e[1]),u=(a=c,o=i,Object.keys(a).filter({}.hasOwnProperty.bind(o))),s=2,m=Date.parse(u[u.length-1])+24*x.j*60*60*1e3,p=u.length-2;p>=0;p--)if(m<=Date.parse(u[p])){s=Math.max(s,u.length-1-p+1);break}for(var d=[],f=function(e){var t=[],a=[];u.slice(e,e+s).forEach((function(e){t.push(c[e]),a.push(i[e])}));var r,n,o,l,m,p,f,b,h=(n=a,o=0,l=0,m=0,p=0,f=0,b=(r=t).length=n.length=Math.min(r.length,n.length),r.forEach((function(e,t){var a=n[t];o+=e,l+=a,m+=e*a,p+=e*e,f+=a*a})),(b*m-o*l)/Math.sqrt((b*p-o*o)*(b*f-l*l)));d.push({Date:u[e],Score:h})},b=u.length-1-s+1;b>=0;b--)f(b);var h=t.rowSymbolSrc.symbol+" - "+t.colSymbolSrc.symbol+" Rolling "+x.j+" days Correlation";r.current.popModalWindow(n.a.createElement(C,{data:d,description:h}))}():r.current.popModalWindow(n.a.createElement("div",null,"Load some market data failed"))})).catch((function(){r.current.popModalWindow(n.a.createElement("div",null,"Load market data failed"))}))}},"NaN"===t.value?"NaN":t.value.toFixed(2).replace(/(\.0*|(?<=(\..*))0*)$/,"").replace("0.",".")))},Y=function(e){e.popperTipRef.current={setOpen:function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=""),e&&(i(t),f(a)),o(e)},getOpen:function(){return a}};var t=Object(r.useState)(!1),a=t[0],o=t[1],l=Object(r.useState)(null),c=l[0],i=l[1],u=Object(r.useState)(""),s=u[0],f=u[1];return n.a.createElement(m.a,{open:a,anchorEl:c,transition:!0},(function(e){var t=e.TransitionProps;return n.a.createElement(p.a,Object.assign({},t,{timeout:350}),n.a.createElement(d.a,{style:{padding:"10px"}},n.a.createElement("span",{style:{whiteSpace:"pre-line",lineHeight:"20px",textAlign:"center"}},s)))}))},A=function(){var e,t=Object(r.useRef)({popModalWindow:null,popPureModal:null}),a=Object(r.useRef)({setOpen:null,getOpen:null}),o=Object(r.useState)([]),c=o[0],i=o[1],m=Object(h.a)({cachePolicy:"no-cache"}),p=m.get,d=m.response,f=function(){var e=Object(l.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/plugin-react/market-correlation-matrix.json");case 2:a=e.sent,d.ok?(console.log(a),i(a.table)):(t.current.popModalWindow(n.a.createElement("div",null,"Load market-correlation-matrix.json failed")),i([]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return f(),function(){}}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:D.a.container},n.a.createElement("div",{style:{display:"grid",justifyItems:"center",alignItems:"center",gridTemplateColumns:"200px "+"40px ".repeat(T(c).length)}},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:D.a.matrixColTitle,key:b.a.generate()}),T(c).map((function(e){return n.a.createElement("div",{className:D.a.matrixColTitle,key:b.a.generate()},e.symbol)}))),(e=[],F(c).forEach((function(r,o){o%c.length==0&&e.push(n.a.createElement("div",{className:D.a.matrixRowTitle,key:b.a.generate()},n.a.createElement(s.a,{href:r.dataUrl,target:"_blank",rel:"noreferrer noopener"},n.a.createElement("span",null,r.rowSymbolSrc.symbol)))),e.push(n.a.createElement(W,{data:r,popperTipRef:a,modalWindowRef:t,key:b.a.generate()}))})),e))),n.a.createElement(Y,{popperTipRef:a}),n.a.createElement(y.a,{modalWindowRef:t}))};t.default=function(){return n.a.createElement(o.a,{injectFirst:!0},n.a.createElement(A,null))}}}]);
//# sourceMappingURL=component---src-pages-correlation-matrix-js-3af38bd8a4605e5121a0.js.map