(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0JEz":function(e,t,r){"use strict";r.r(t);var a=r("q1tI"),n=r.n(a),i=r("w8ma"),o=r("ZuIi"),l=r("Nb3f"),c=r.n(l),s=r("OGDC"),u=r("DbNq"),d=r.n(u),m=r("UG0H"),f=r("sD0r"),b=r("wx14"),p=r("dxcw"),h=r("CZYX"),v=r("YSst"),y=r("nKUr");var g=function(e){var t=e.children,r=e.theme,n=Object(h.a)(),i=a.useMemo((function(){var e=null===n?r:function(e,t){return"function"==typeof t?t(e):Object(b.a)({},e,t)}(n,r);return null!=e&&(e[v.a]=null!==n),e}),[r,n]);return Object(y.jsx)(p.a.Provider,{value:i,children:t})},M=r("kQF4"),_=r("Fg+5"),E=r("rT0G"),A=r("5I82"),x=r("NZDO"),O=r("z6Y5"),j=r("je4i"),C=r.n(j),k=r("tFdz"),w=r("wd/R"),S=r.n(w),V=r("qnxO"),P=r("h4VS"),N=r("zLVn"),W=r("iuhU"),U=r("aGM9"),D=r("AeFk"),L=r("2Qr1"),R=r("xeev"),B=r("UnQg"),T=r("Vn7y"),K=r("tCRK"),H=r("TkYO"),I=r("PYeY");function X(e){return Object(H.a)("MuiLinearProgress",e)}Object(I.a)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var F,q,z,Y,G,Q,J,Z,$,ee,te,re,ae=["className","color","value","valueBuffer","variant"],ne=Object(D.keyframes)(J||(J=F||(F=Object(P.a)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),ie=Object(D.keyframes)(Z||(Z=q||(q=Object(P.a)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),oe=Object(D.keyframes)($||($=z||(z=Object(P.a)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),le=function(e,t){return"inherit"===t?"currentColor":"light"===e.palette.mode?Object(L.d)(e.palette[t].main,.62):Object(L.b)(e.palette[t].main,.5)},ce=Object(T.a)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["color".concat(Object(R.a)(r.color))],t[r.variant]]}})((function(e){var t=e.ownerState,r=e.theme;return Object(b.a)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:le(r,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),se=Object(T.a)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:function(e,t){var r=e.ownerState;return[t.dashed,t["dashedColor".concat(Object(R.a)(r.color))]]}})((function(e){var t=e.ownerState,r=e.theme,a=le(r,t.color);return Object(b.a)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),Object(D.css)(ee||(ee=Y||(Y=Object(P.a)(["\n    animation: "," 3s infinite linear;\n  "]))),oe)),ue=Object(T.a)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:function(e,t){var r=e.ownerState;return[t.bar,t["barColor".concat(Object(R.a)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})((function(e){var t=e.ownerState,r=e.theme;return Object(b.a)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":r.palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(function(e){var t=e.ownerState;return("indeterminate"===t.variant||"query"===t.variant)&&Object(D.css)(te||(te=G||(G=Object(P.a)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),ne)})),de=Object(T.a)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:function(e,t){var r=e.ownerState;return[t.bar,t["barColor".concat(Object(R.a)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})((function(e){var t=e.ownerState,r=e.theme;return Object(b.a)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":r.palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:le(r,t.color),transition:"transform .".concat(4,"s linear")})}),(function(e){var t=e.ownerState;return("indeterminate"===t.variant||"query"===t.variant)&&Object(D.css)(re||(re=Q||(Q=Object(P.a)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),ie)})),me=a.forwardRef((function(e,t){var r=Object(K.a)({props:e,name:"MuiLinearProgress"}),a=r.className,n=r.color,i=void 0===n?"primary":n,o=r.value,l=r.valueBuffer,c=r.variant,s=void 0===c?"indeterminate":c,u=Object(N.a)(r,ae),d=Object(b.a)({},r,{color:i,variant:s}),m=function(e){var t=e.classes,r=e.variant,a=e.color,n={root:["root","color".concat(Object(R.a)(a)),r],dashed:["dashed","dashedColor".concat(Object(R.a)(a))],bar1:["bar","barColor".concat(Object(R.a)(a)),("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","buffer"!==r&&"barColor".concat(Object(R.a)(a)),"buffer"===r&&"color".concat(Object(R.a)(a)),("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return Object(U.a)(n,X,t)}(d),f=Object(B.a)(),p={},h={bar1:{},bar2:{}};if("determinate"===s||"buffer"===s)if(void 0!==o){p["aria-valuenow"]=Math.round(o),p["aria-valuemin"]=0,p["aria-valuemax"]=100;var v=o-100;"rtl"===f.direction&&(v=-v),h.bar1.transform="translateX(".concat(v,"%)")}else 0;if("buffer"===s)if(void 0!==l){var g=(l||0)-100;"rtl"===f.direction&&(g=-g),h.bar2.transform="translateX(".concat(g,"%)")}else 0;return Object(y.jsxs)(ce,Object(b.a)({className:Object(W.a)(m.root,a),ownerState:d,role:"progressbar"},p,{ref:t},u,{children:["buffer"===s?Object(y.jsx)(se,{className:m.dashed,ownerState:d}):null,Object(y.jsx)(ue,{className:m.bar1,ownerState:d,style:h.bar1}),"determinate"===s?null:Object(y.jsx)(de,{className:m.bar2,ownerState:d,style:h.bar2})]}))})),fe=r("Gqia");var be=function(e){var t=e.progress;return n.a.createElement(x.a,{sx:{display:"flex",alignItems:"center"}},n.a.createElement(x.a,{sx:{width:"100%",mr:1}},n.a.createElement(me,{variant:"determinate",value:t.val,style:{height:10}})),n.a.createElement(x.a,{sx:{minWidth:100}},n.a.createElement(fe.a,{noWrap:!0,variant:"body1",style:{textOverflow:"clip",overflow:"visible"}},t.text)))},pe=r("oqdv"),he=r("kLkQ"),ve=r("Nihg"),ye=r("jJ2d"),ge=r("dI71"),Me=r("wcMh"),_e=r("lQYU"),Ee=r("FQZO"),Ae=r("ps87"),xe=r("4cdY"),Oe=r("y9N3"),je=r("J+eN"),Ce=r("b+jq"),ke=r("nJDY"),we=function(e){function t(){return e.apply(this,arguments)||this}return Object(ge.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.x,r=e.y,a=e.stroke,i=e.value,o=e.fontSize;return n.a.createElement("text",{x:t,y:r,dy:-4,fill:a,fontSize:o,textAnchor:"middle"},i)},t}(a.PureComponent),Se=function(e){var t=e.data,r=e.iteration,a=e.info,i=e.show_mean_label,o=void 0===i||i,l=e.modal_mode,c=void 0===l||l,s=Array(r).fill(0).map((function(e,t){return n.a.createElement(Me.a,{key:C.a.generate(),type:"monotone",dataKey:"Path-"+String(t).padStart(2,"0"),stroke:"#d3d3d3",dot:!1,strokeWidth:2})})),u="strike"in a&&"cost"in a?n.a.createElement(n.a.Fragment,null,n.a.createElement(_e.a,{y:a.strike,label:{position:"insideBottomLeft",value:"Strike: "+a.strike,fill:"red",fontSize:14},stroke:"red",strokeDasharray:"3 3"}),n.a.createElement(_e.a,{y:a.cost,label:{position:"insideTopLeft",value:"Cost: "+a.cost,fill:"blue",fontSize:14},stroke:"blue",strokeDasharray:"3 3"})):n.a.createElement(n.a.Fragment,null),d="symbol"in a?n.a.createElement(Ee.a,{value:"Symbol: "+a.symbol,offset:5,position:"bottom",fill:"#8884d8",fontSize:16}):n.a.createElement(n.a.Fragment,null),m=c?{width:window.innerWidth-100+"px",height:window.innerHeight-100+"px",maxWidth:"1200px",maxHeight:"600px"}:{width:"100%",height:"100%"};return n.a.createElement("div",{style:m},n.a.createElement(Ae.a,{width:"100%",height:"100%"},n.a.createElement(xe.a,{data:t,margin:{top:5,right:30,left:20,bottom:20}},n.a.createElement(Oe.a,{strokeDasharray:"3 3"}),n.a.createElement(je.a,{dataKey:"Name"},d),n.a.createElement(Ce.a,{domain:["auto","auto"]}),n.a.createElement(ke.a,{itemSorter:function(e){return e.name}}),s,n.a.createElement(Me.a,{type:"monotone",dataKey:"Mean",stroke:"#FF8042",strokeWidth:3,label:o?n.a.createElement(we,{stroke:"#FF8042",fontSize:14}):n.a.createElement(n.a.Fragment,null)}),u)))},Ve=r("y4pv"),Pe=r.n(Ve),Ne=r("ea0G"),We=r.n(Ne),Ue=function(e){var t=e.FetchNornFinanceAPIServerRef,r=Object(k.a)("https://"+pe.e,{cachePolicy:"no-cache"});return t.current.server=r,n.a.createElement(n.a.Fragment,null)};function De(e,t){return""!=t?"/ws/option/quote-valuation?symbol="+e+"&max_next_days=252&min_volume=0&last_trade_days=252&specific_contract="+t:"/ws/option/quote-valuation?symbol="+e+"&only_otm=true"}var Le=function(e){var t=e.OptionsRef,r=e.ControlPannelRef,i=e.SyncDataRef,o=Object(a.useState)(null),l=o[0],c=o[1],s=Object(a.useRef)({apiArgs:[],now:0,data:[]}),u=function(e){if(e.length>0&&(s.current.apiArgs=e),0!=s.current.apiArgs.length){var t=s.current.apiArgs[s.current.now],a=De(t.symbol,t.specific_contract_args);c(new WebSocket("wss://"+pe.e+a));var n=100*s.current.now/s.current.apiArgs.length,i=Math.round(n)+"% - Querying "+t.symbol+" ("+(s.current.now+1)+"/"+s.current.apiArgs.length+")";r.current.updateProgress(n,i)}else console.error("No apiArgs data")};return i.current={syncData:u},Object(ve.k)((function(){l&&l.readyState===WebSocket.OPEN?(l.send(""),console.log("heartbeat")):s.current.now<s.current.apiArgs.length&&(console.warn("unexpected disconnected, do syncData again"),u([]))}),l?3e3:null),Object(a.useEffect)((function(){return l&&(l.onopen=function(){console.log("WebSocket Connected")},l.onmessage=function(e){var a=JSON.parse(e.data);if(console.log(a),s.current.data.push(a),s.current.now+=1,0!==s.current.apiArgs.length)if(s.current.now>=s.current.apiArgs.length)t.current.renderTable(s.current.data),s.current.now=0,s.current.data=[],c(null),r.current.updateProgress(100,"100%");else{var n=s.current.apiArgs[s.current.now],i=De(n.symbol,n.specific_contract_args);c(new WebSocket("wss://"+pe.e+i));var o=100*s.current.now/s.current.apiArgs.length,l=Math.round(o)+"% - Querying "+n.symbol+" ("+(s.current.now+1)+"/"+s.current.apiArgs.length+")";r.current.updateProgress(o,l)}}),function(){}}),[l]),n.a.createElement(n.a.Fragment,null)},Re=function(e){var t=e.selectArg,r=e.SyncDataRef,i=e.modalWindowRef,o=e.ControlPannelRef,l=Object(a.useState)({val:0,text:"0%"}),s=l[0],u=l[1],d=Object(k.a)({cachePolicy:"no-cache"});return o.current={updateProgress:function(e,t){u({val:e,text:t})}},n.a.createElement("div",{className:We.a.queryPannel},n.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},n.a.createElement(O.a,{item:!0,md:10,xs:7},n.a.createElement(be,{progress:s})),n.a.createElement(O.a,{item:!0,md:2,xs:5},n.a.createElement(x.a,{display:"flex",justifyContent:"flex-end"},n.a.createElement(g,{theme:Object(f.a)({palette:{primary:m.a}})},n.a.createElement(A.a,{className:We.a.queryBtn,variant:"contained",color:"primary",startIcon:n.a.createElement(c.a,null),onClick:function(){var e;e=t,Promise.all([Object(ve.c)("/trade-data.json",d)]).then((function(t){if(console.log(t),1===t.length&&null!==t[0]){var a=t[0],o=[];0==e?a.hold_stock_list.concat(a.star_option_list).forEach((function(e){o.push({symbol:e,specific_contract_args:""})})):a.hold_option_list.forEach((function(e){o.push({symbol:e.symbol,specific_contract_args:e.type+"_"+e.expiry+"_"+e.strike})})),r.current.syncData(o)}else console.error("refreshQueryOptionsData some data failed"),i.current.popModalWindow(n.a.createElement("div",null,"Get some data failed..."))})).catch((function(){console.error("refreshQueryOptionsData failed"),i.current.popModalWindow(n.a.createElement("div",null,"Get data failed..."))}))}},"Query Now"))))))},Be=function(){var e=Object(a.useRef)({popModalWindow:null,popPureModal:null}),t=Object(a.useRef)({server:null}),r=Object(a.useRef)({syncData:null}),i=Object(a.useRef)({updateProgress:null}),l={hide:!1,text:"Price (Stock)"},c={hide:!1,text:"Expiry"},u={hide:!1,text:"Strike"},m={hide:!1,text:"Last Price"},f={hide:!1,text:"Valuation (Avg)"},b={hide:!1,text:"Bias (Price)",description:"| Last Price - Valuation (Avg) | / Last Price"},p={hide:!1,text:"P/S (%)",description:"Last Price / Strike"},h={hide:!1,text:"P/S (Y%)",description:"Last Price / Strike (Year)"},v={hide:!1,text:"Dist (%)",description:"| Price (Stock) - Strike | / Strike"},y={hide:!0,text:"Kelly (Buy)",description:"Kelly Criterion"},g={hide:!0,text:"Kelly (Sell)",description:"Kelly Criterion"},A={hide:!1,text:"Kelly (Buy, MU0)",description:"Kelly Criterion, MU=0"},x={hide:!1,text:"Kelly (Sell, MU0)",description:"Kelly Criterion, MU=0"},j={hide:!1,text:"δ (Delta)"},w={hide:!1,text:"γ (Gamma)"},P={hide:!1,text:"ρ (Rho)"},N={hide:!1,text:"θ (Theta)"},W={hide:!1,text:"ν (Vega)"},U={hide:!1,text:"Last Trade Date"},D={hide:!1,text:"Bid"},L={hide:!1,text:"Ask"},R={hide:!0,text:"Change"},B={hide:!1,text:"Change (%)"},T={hide:!1,text:"Volume"},K={hide:!1,text:"Open Interest"},H={hide:!1,text:"Implied Volatility"},I={hide:!1,text:"EWMA Historical Volatility"},X={hide:!1,text:"Black Scholes Merton"},F={hide:!1,text:"Monte Carlo"},q={hide:!1,text:"Binomial Tree"},z={hide:!1,text:"MC Chart"},Y=function(){return[Object(ve.i)("symbol","Symbol",115,"symbol"in oe&&oe.symbol),Object(ve.g)("stockPrice",l.text,125,2,"stockPrice"in oe?oe.stockPrice:l.hide),{field:"expiryDate",headerName:c.text,width:120,type:"date",renderCell:function(e){return n.a.createElement("span",null,S()(e.row.expiryDate).format("YYYY-MM-DD"))},hide:"expiryDate"in oe?oe.expiryDate:c.hide},Object(ve.g)("strike",u.text,110,2,"strike"in oe?oe.strike:u.hide),Object(ve.g)("lastPrice",m.text,140,2,"lastPrice"in oe?oe.lastPrice:m.hide),Object(ve.g)("avgEWMA",f.text,150,2,"avgEWMA"in oe?oe.avgEWMA:f.hide),{field:"priceBias",headerName:b.text,width:120,type:"number",description:b.description,renderCell:function(e){return"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?n.a.createElement("span",null,"-"):n.a.createElement("span",{style:{fontWeight:500,color:e.row.lastPrice>e.row.avgEWMA?Object(he.d)(e.value):e.row.lastPrice<e.row.avgEWMA?Object(he.c)(e.value):""}},e.value.toFixed(2))},hide:"priceBias"in oe?oe.priceBias:b.hide},Object(ve.f)("priceStrikeRatio",p.text,90,"priceStrikeRatio"in oe?oe.priceStrikeRatio:p.hide,p.description),Object(ve.f)("priceStrikeYearRatio",h.text,90,"priceStrikeYearRatio"in oe?oe.priceStrikeRatio:h.hide,h.description),Object(ve.f)("distanceRatio",v.text,90,"distanceRatio"in oe?oe.distanceRatio:v.hide,v.description),Object(ve.a)("KellyCriterion_buy",y.text,130,2,"KellyCriterion_buy"in oe?oe.KellyCriterion_buy:y.hide,500,y.description),Object(ve.a)("KellyCriterion_sell",g.text,130,2,"KellyCriterion_sell"in oe?oe.KellyCriterion_sell:g.hide,500,g.description),Object(ve.a)("KellyCriterion_MU_0_buy",A.text,130,2,"KellyCriterion_MU_0_buy"in oe?oe.kellyCriterion_MU_0_buy:A.hide,500,A.description),Object(ve.a)("KellyCriterion_MU_0_sell",x.text,130,2,"KellyCriterion_MU_0_sell"in oe?oe.KellyCriterion_MU_0_sell:x.hide,500,x.description),Object(ve.g)("delta",j.text,90,2,"delta"in oe?oe.delta:j.hide),Object(ve.g)("gamma",w.text,90,2,"gamma"in oe?oe.gamma:w.hide),Object(ve.g)("rho",P.text,90,2,"rho"in oe?oe.rho:P.hide),Object(ve.g)("theta",N.text,90,2,"theta"in oe?oe.theta:N.hide),Object(ve.g)("vega",W.text,90,2,"vega"in oe?oe.vega:W.hide),{field:"lastTradeDate",headerName:U.text,width:145,type:"date",renderCell:function(e){return n.a.createElement("span",null,S()(e.row.lastTradeDate).format("YYYY-MM-DD"))},hide:"lastTradeDate"in oe?oe.lastTradeDate:U.hide},Object(ve.g)("bid",D.text,105,2,"bid"in oe?oe.bid:D.hide),Object(ve.g)("ask",L.text,105,2,"ask"in oe?oe.ask:L.hide),Object(ve.b)("change",R.text,130,"change"in oe?oe.change:R.hide,500),Object(ve.a)("percentChange",B.text,140,2,"percentChange"in oe?oe.percentChange:B.hide,500),Object(ve.g)("volume",T.text,140,0,"volume"in oe?oe.volume:T.hide),Object(ve.g)("openInterest",K.text,140,0,"openInterest"in oe?oe.openInterest:K.hide),Object(ve.f)("impliedVolatility",H.text,140,"impliedVolatility"in oe?oe.impliedVolatility:H.hide),Object(ve.f)("EWMAHisVol",I.text,140,"EWMAHisVol"in oe?oe.EWMAHisVol:I.hide),Object(ve.g)("BSM_EWMAHisVol",X.text,140,2,"BSM_EWMAHisVol"in oe?oe.BSM_EWMAHisVol:X.hide),Object(ve.g)("MC_EWMAHisVol",F.text,140,2,"MC_EWMAHisVol"in oe?oe.MC_EWMAHisVol:F.hide),Object(ve.g)("BT_EWMAHisVol",q.text,140,2,"BT_EWMAHisVol"in oe?oe.BT_EWMAHisVol:q.hide),{field:"MCChart",headerName:z.text,width:120,renderCell:function(r){return n.a.createElement(s.a,{size:"small","aria-haspopup":"true",onClick:function(){var a="/stock/price-simulation-by-mc?symbol="+r.row.symbol+"&iteration=50&mu=0&vol="+r.row.EWMAHisVol+"&days="+Object(he.g)(S()((new Date).toISOString().split("T")[0]),S()(r.row.expiryDate));Promise.all([Object(ve.c)(a,t.current.server)]).then((function(t){if(console.log(t),1===t.length&&null!==t[0]){var a=[],i=1===r.row.kind?r.row.strike+r.row.lastPrice:r.row.strike-r.row.lastPrice,o={symbol:r.row.symbol,strike:r.row.strike,cost:i};t[0].mean.forEach((function(e,r){var n={Mean:parseInt(100*e,10)/100,Name:"Day"+r};t[0].data.forEach((function(e,t){n["Path-"+String(t).padStart(2,"0")]=parseInt(100*e[r],10)/100})),a.push(n)})),console.log(a),e.current.popModalWindow(n.a.createElement(Se,{data:a,iteration:50,info:o}))}else console.error("Call simulation api failed"),e.current.popModalWindow(n.a.createElement("div",null,"Call simulation api failed"))})).catch((function(){console.error("Call simulation api failed..."),e.current.popModalWindow(n.a.createElement("div",null,"Call simulation api failed..."))}))}},n.a.createElement(d.a,{color:"primary",style:{fontSize:40}}))},hide:"MCChart"in oe?oe.MCChart:z.hide}]},G=Object(k.a)({cachePolicy:"no-cache"}),Q=function(e){var t=[],r=[];e.forEach((function(e){var a=e.symbol,n=e.stockPrice,i=e.EWMA_historicalVolatility;e.contracts.forEach((function(e){var o=e.expiryDate,l=function(e){return e.map((function(e,t){var r=e.valuationData,l={id:t,symbol:a,stockPrice:n,EWMAHisVol:i,expiryDate:o,lastTradeDate:void 0!==e.lastTradeDate&&null!==e.lastTradeDate&&"-"!==e.lastTradeDate?e.lastTradeDate:0,strike:void 0!==e.strike&&null!==e.strike&&"-"!==e.strike?e.strike:-Number.MAX_VALUE,lastPrice:void 0!==e.lastPrice&&null!==e.lastPrice&&"-"!==e.lastPrice?e.lastPrice:-Number.MAX_VALUE,bid:void 0!==e.bid&&null!==e.bid&&"-"!==e.bid?e.bid:-Number.MAX_VALUE,ask:void 0!==e.ask&&null!==e.ask&&"-"!==e.ask?e.ask:-Number.MAX_VALUE,change:void 0!==e.change&&null!==e.change&&"-"!==e.change?e.change:-Number.MAX_VALUE,percentChange:void 0!==e.percentChange&&null!==e.percentChange&&"-"!==e.percentChange?e.percentChange/100:-Number.MAX_VALUE,volume:void 0!==e.volume&&null!==e.volume&&"-"!==e.volume?e.volume:-Number.MAX_VALUE,openInterest:void 0!==e.openInterest&&null!==e.openInterest&&"-"!==e.openInterest?e.openInterest:-Number.MAX_VALUE,impliedVolatility:void 0!==e.impliedVolatility&&null!==e.impliedVolatility&&"-"!==e.impliedVolatility?e.impliedVolatility:-Number.MAX_VALUE,BSM_EWMAHisVol:void 0!==r.BSM_EWMAHisVol&&null!==r.BSM_EWMAHisVol&&r.BSM_EWMAHisVol>0?r.BSM_EWMAHisVol:-Number.MAX_VALUE,MC_EWMAHisVol:void 0!==r.MC_EWMAHisVol&&null!==r.MC_EWMAHisVol&&r.MC_EWMAHisVol>0?r.MC_EWMAHisVol:-Number.MAX_VALUE,BT_EWMAHisVol:void 0!==r.BT_EWMAHisVol&&null!==r.BT_EWMAHisVol&&r.BT_EWMAHisVol>0?r.BT_EWMAHisVol:-Number.MAX_VALUE,delta:void 0!==r.delta&&null!==r.delta?r.delta:-Number.MAX_VALUE,gamma:void 0!==r.gamma&&null!==r.gamma?r.gamma:-Number.MAX_VALUE,rho:void 0!==r.rho&&null!==r.rho?r.rho:-Number.MAX_VALUE,theta:void 0!==r.theta&&null!==r.theta?r.theta:-Number.MAX_VALUE,vega:void 0!==r.vega&&null!==r.vega?r.vega:-Number.MAX_VALUE,KellyCriterion_buy:void 0!==r.KellyCriterion_buy&&null!==r.KellyCriterion_buy?r.KellyCriterion_buy:-Number.MAX_VALUE,KellyCriterion_sell:void 0!==r.KellyCriterion_sell&&null!==r.KellyCriterion_sell?r.KellyCriterion_sell:-Number.MAX_VALUE,KellyCriterion_MU_0_buy:void 0!==r.KellyCriterion_MU_0_buy&&null!==r.KellyCriterion_MU_0_buy?r.KellyCriterion_MU_0_buy:-Number.MAX_VALUE,KellyCriterion_MU_0_sell:void 0!==r.KellyCriterion_MU_0_sell&&null!==r.KellyCriterion_MU_0_sell?r.KellyCriterion_MU_0_sell:-Number.MAX_VALUE},c=0,s=0;if(l.BSM_EWMAHisVol>0&&(c+=1,s+=l.BSM_EWMAHisVol),l.MC_EWMAHisVol>0&&(c+=1,s+=l.MC_EWMAHisVol),l.BT_EWMAHisVol>0&&(c+=1,s+=l.BT_EWMAHisVol),l.avgEWMA=s/c,l.priceBias=-Number.MAX_VALUE,l.lastPrice!=-Number.MAX_VALUE&&(l.priceBias=Math.abs(l.lastPrice-l.avgEWMA)/l.lastPrice),l.priceStrikeRatio=-Number.MAX_VALUE,l.strike!=-Number.MAX_VALUE&&l.lastPrice!=-Number.MAX_VALUE&&(l.priceStrikeRatio=l.lastPrice/l.strike),l.priceStrikeYearRatio=-Number.MAX_VALUE,l.priceStrikeRatio!=-Number.MAX_VALUE){var u=Math.floor((Date.parse(o)-Date.parse((new Date).toISOString().slice(0,10)))/864e5);l.priceStrikeYearRatio=365*l.priceStrikeRatio/u}return l.distanceRatio=-Number.MAX_VALUE,l.strike!=-Number.MAX_VALUE&&l.stockPrice!=-Number.MAX_VALUE&&(l.distanceRatio=Math.abs(l.stockPrice-l.strike)/l.stockPrice),l}))};t=t.concat(l(e.calls)),r=r.concat(l(e.puts))}))})),t.forEach((function(e,r){t[r].id=r})),r.forEach((function(e,t){r[t].id=t})),console.log(t),te(t),console.log(r),ne(r)},J=function(t){Promise.all([Object(ve.c)(t,G)]).then((function(t){console.log(t),1===t.length&&null!==t[0]?Q(t[0]):(console.error("refreshData some data failed"),e.current.popModalWindow(n.a.createElement("div",null,"Get some data failed...")))})).catch((function(){console.error("refreshData failed"),e.current.popModalWindow(n.a.createElement("div",null,"Get data failed..."))}))},Z=Object(a.useRef)({renderTable:Q}),$=Object(a.useState)([]),ee=$[0],te=$[1],re=Object(a.useState)([]),ae=re[0],ne=re[1],ie=Object(a.useState)({}),oe=ie[0],le=ie[1],ce=Object(a.useState)(0),se=ce[0],ue=ce[1];return Object(a.useEffect)((function(){return J(pe.f[0].local_path),function(){}}),[]),n.a.createElement("div",{className:Pe.a.defaultFont+" "+We.a.container},n.a.createElement(O.a,{container:!0,spacing:3},n.a.createElement(O.a,{item:!0,xs:6},n.a.createElement(_.a,{size:"small",variant:"outlined",className:We.a.optionsTableSelect},n.a.createElement(M.a,{htmlFor:"arg-select"},"Options Valuation"),n.a.createElement(E.a,{native:!0,value:se,displayEmpty:!0,onChange:function(e){ue(parseInt(e.target.value)),J(pe.f[e.target.value].local_path)},label:"Options Valuation"},pe.f.map((function(e,t){return n.a.createElement("option",{key:C.a.generate(),index:t,value:t},e.display_name)})))))),n.a.createElement(Re,{selectArg:se,SyncDataRef:r,modalWindowRef:e,ControlPannelRef:i}),n.a.createElement("div",{key:C.a.generate()},n.a.createElement("div",{className:We.a.table},n.a.createElement(o.a,{rows:ee,columns:Y(),rowsPerPageOptions:[],autoPageSize:!0,components:{NoRowsOverlay:V.a},disableSelectionOnClick:!0,onColumnVisibilityChange:function(e){var t=oe;t[e.field]=!e.isVisible,le(t)},initialState:{filter:{filterModel:{items:"star_list"===pe.f[se].name?[{columnField:"lastPrice",operatorValue:">",value:.1}]:[]}},sorting:{sortModel:[{field:"priceBias",sort:"desc"}]}}})),n.a.createElement("div",{className:We.a.table},n.a.createElement(o.a,{rows:ae,columns:Y(),rowsPerPageOptions:[],autoPageSize:!0,components:{NoRowsOverlay:V.a},disableSelectionOnClick:!0,onColumnVisibilityChange:function(e){var t=oe;t[e.field]=!e.isVisible,le(t)},initialState:{filter:{filterModel:{items:"star_list"===pe.f[se].name?[{columnField:"lastPrice",operatorValue:">",value:.1}]:[]}},sorting:{sortModel:[{field:"priceBias",sort:"desc"}]}}}))),n.a.createElement(ye.a,{modalWindowRef:e}),n.a.createElement(Le,{OptionsRef:Z,ControlPannelRef:i,SyncDataRef:r}),n.a.createElement(Ue,{FetchNornFinanceAPIServerRef:t}))};t.default=function(){return n.a.createElement(i.a,{injectFirst:!0},n.a.createElement(Be,null))}},"4cdY":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r("hszt"),n=r("wcMh"),i=r("J+eN"),o=r("b+jq"),l=r("Ao2N"),c=Object(a.a)({chartName:"LineChart",GraphicalChild:n.a,axisComponents:[{axisType:"xAxis",AxisComp:i.a},{axisType:"yAxis",AxisComp:o.a}],formatAxisMap:l.b})},DbNq:function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("jelL")),i=r("nKUr"),o=(0,n.default)((0,i.jsx)("path",{d:"M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z"}),"BarChartSharp");t.default=o},Gcu1:function(e,t,r){"use strict";t.a=function(e,t,r,a,n){return null}},Nb3f:function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("jelL")),i=r("nKUr"),o=(0,n.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.default=o},Udd0:function(e,t,r){"use strict";r.r(t),r.d(t,"capitalize",(function(){return n.a})),r.d(t,"createChainedFunction",(function(){return i})),r.d(t,"createSvgIcon",(function(){return o.a})),r.d(t,"debounce",(function(){return l.a})),r.d(t,"deprecatedPropType",(function(){return c})),r.d(t,"isMuiElement",(function(){return s.a})),r.d(t,"ownerDocument",(function(){return u.a})),r.d(t,"ownerWindow",(function(){return d.a})),r.d(t,"requirePropFactory",(function(){return m.a})),r.d(t,"setRef",(function(){return f})),r.d(t,"unstable_useEnhancedEffect",(function(){return b.a})),r.d(t,"unstable_useId",(function(){return p.a})),r.d(t,"unsupportedProp",(function(){return h.a})),r.d(t,"useControlled",(function(){return v.a})),r.d(t,"useEventCallback",(function(){return y.a})),r.d(t,"useForkRef",(function(){return g.a})),r.d(t,"useIsFocusVisible",(function(){return M.a})),r.d(t,"unstable_ClassNameGenerator",(function(){return _}));var a=r("Oory"),n=r("xeev"),i=r("GRZg").a,o=r("M7pN"),l=r("7yHM");var c=function(e,t){return function(){return null}},s=r("M3M6"),u=r("rdfb"),d=r("WFZb"),m=r("hxbm"),f=r("wB8u").a,b=r("6q60"),p=r("DSU1"),h=r("Gcu1"),v=r("1vOf"),y=r("KXty"),g=r("ZfBw"),M=r("8rms"),_={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.a.configure(e)}}},ea0G:function(e,t,r){e.exports={container:"options-module--container--2TUIk",optionsTableSelect:"options-module--optionsTableSelect--4rIAu",queryPannel:"options-module--queryPannel--3N9g-",parameterTitle:"options-module--parameterTitle--yYHMI",parameterBlock:"options-module--parameterBlock--PqKd0",valueText:"options-module--valueText--2UFQB",queryBtn:"options-module--queryBtn--Ue1au",table:"options-module--table--2Tr-f"}},hxbm:function(e,t,r){"use strict";r("wx14");t.a=function(e,t){return function(){return null}}},jelL:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=r("Udd0")}}]);
//# sourceMappingURL=component---src-pages-options-js-54cfae675506e46fbe5c.js.map